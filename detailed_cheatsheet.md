# Azure Beginner Labs — Full Detailed Guide

This document contains full, step-by-step instructions for 10 beginner Azure labs. Use it as a printable guide while performing hands-on practice in the Azure Portal or CLI.

**Notes before you start**
- You need an Azure subscription. Use a free account or sandbox for practice.
- When using the Portal, follow each step in order. CLI commands are shown where helpful.
- Replace `<placeholders>` with your actual names (resource group, VM name, storage name, etc.).
- Default region examples: East US, West Europe, Central India — choose what's nearest to you.

---

## Lab 1 — Create a Virtual Machine (Windows / Linux)

### Objective
Create a VM, connect to it, and practice start/stop and resizing.

### Steps (Portal)
1. Sign in to the Azure Portal (portal.azure.com).
2. Search **Virtual Machines** → Click **+ Create** → **Azure virtual machine**.
3. Basics tab:
   - Subscription: select your subscription.
   - Resource group: **Create new** → `rg-azure-labs` (or your name).
   - Virtual machine name: `vm-lab-1`.
   - Region: choose near you (e.g., `Central India`).
   - Image: choose **Ubuntu LTS** or **Windows Server 2019**.
   - Size: click **Change size** → pick `B1s` (cost-effective) or `Standard_B1ms`.
   - Authentication: choose **SSH public key** (Linux) or **Password** (Windows).
   - Username: `azureuser` (example).
4. Disks: keep default (Premium for Windows, Standard HDD/SSD for Linux is fine for labs).
5. Networking: create a new virtual network or accept default; ensure Public IP = **Yes** for initial lab access.
6. Management/Advanced/Tags: leave defaults for now.
7. Review + Create → Validate → Create.

### Connect
- Linux: get Public IP from VM overview → `ssh azureuser@<PublicIP>` (ensure SSH key is set up).
- Windows: download RDP file from portal → open with Remote Desktop (mstsc) and use credentials.

### CLI commands (Azure Cloud Shell / local az)
```bash
# create resource group
az group create -n rg-azure-labs -l centralindia

# create vm (Linux, SSH key auto-generated by Azure)
az vm create -g rg-azure-labs -n vm-lab-1 --image UbuntuLTS --size Standard_B1ms --admin-username azureuser --generate-ssh-keys

# open port 22 for SSH (NSG rule)
az vm open-port --port 22 -g rg-azure-labs -n vm-lab-1
```

### Practice
- Stop: Portal → VM → Stop
- Start: Portal → Start
- Resize: Stop VM → Change size → Start VM

---

## Lab 2 — Virtual Network (VNet) & Subnets

### Objective
Create a VNet with two subnets, deploy VMs into them, and configure NSGs to control traffic.

### Steps (Portal)
1. Portal → **Virtual networks** → + Create.
   - Name: `vnet-lab`
   - Address space: `10.0.0.0/16`
   - Subnet 1 name: `frontend` → Address range: `10.0.1.0/24`
   - Subnet 2 name: `backend` → Address range: `10.0.2.0/24`
2. Create two VMs and attach each to different subnets:
   - During VM creation, under Networking → Virtual network → choose `vnet-lab` and select the respective subnet.
3. Create NSGs (Network security groups):
   - Portal → Network security groups → + Create → `nsg-frontend`, `nsg-backend`
   - Add inbound rules:
     - For `nsg-frontend`: Allow SSH (22) / RDP (3389) from Internet or your IP only.
     - For `nsg-backend`: Deny inbound from Internet; allow only from `frontend` subnet (use service tags or source IP ranges).
4. Associate NSGs with the subnet or NICs of the VMs (recommended: NIC-level for lab testing).
5. Test connectivity:
   - SSH from frontend to backend: `ssh azureuser@10.0.2.4` (private IP).
   - Or use `ping` (ICMP must be allowed in NSG to use ping).

### CLI snippets
```bash
# create vnet and subnets
az network vnet create -g rg-azure-labs -n vnet-lab --address-prefix 10.0.0.0/16 --subnet-name frontend --subnet-prefix 10.0.1.0/24
az network vnet subnet create -g rg-azure-labs --vnet-name vnet-lab -n backend --address-prefix 10.0.2.0/24
```

---

## Lab 3 — Storage Account & Blob Container

### Objective
Create a storage account, blob container, upload an object, and generate a SAS URL.

### Steps (Portal)
1. Portal → **Storage accounts** → + Create.
   - Name: `stlab<unique>` (must be globally unique; only lowercase letters & numbers).
   - Performance: Standard; Replication: LRS (lab).
2. After creation → Storage account → Data storage → Containers → + Create:
   - Container name: `lab-files`
   - Access level: Private (Recommended) or Blob (if public).
3. Upload a file: Click Upload → choose file → Upload.
4. Generate SAS URL:
   - Container → Select blob → Generate SAS → set expiry and permissions (Read only) → Copy URL.
5. Test: Paste URL in browser (if container or blob is public or SAS valid).

### CLI snippets
```bash
# create storage account
az storage account create -n stlabunique123 -g rg-azure-labs -l centralindia --sku Standard_LRS --kind StorageV2

# create container
az storage container create --account-name stlabunique123 -n lab-files

# upload a file
az storage blob upload --account-name stlabunique123 -c lab-files -f ./sample.txt -n sample.txt
```

---

## Lab 4 — File Share & Mount on VM (Windows example)

### Objective
Create an Azure File share and mount it on a Windows VM as a drive letter.

### Steps (Portal)
1. Storage Account → File shares → + Create.
   - Name: `fileshare-lab` → Quota: 10 GB.
2. Click file share → Connect → Choose **Windows** tab → follow instructions to mount with `net use`.
3. Example `net use` command (replace placeholders):
```powershell
net use Z: \stlabunique123.file.core.windows.netileshare-lab /u:stlabunique123 <storage-account-key>
```
4. Verify in File Explorer → drive Z: appears.

### Linux mount (CIFS)
```bash
sudo apt-get install cifs-utils
sudo mount -t cifs //stlabunique123.file.core.windows.net/fileshare-lab /mnt/azurefiles -o vers=3.0,username=stlabunique123,password=<account-key>,dir_mode=0777,file_mode=0777,sec=ntlmssp
```

---

## Lab 5 — Deploy a Web App (Azure App Service)

### Objective
Create an App Service and deploy a sample app (from GitHub or local ZIP).

### Steps (Portal)
1. Portal → **App Services** → + Create.
   - Name: `webapp-lab-1` (unique)
   - Publish: Code
   - Runtime stack: Node 18 / .NET / Python as needed
   - Region & App Service Plan: pick Free or Basic for lab
2. After creation → Deployment Center → choose GitHub or Local Git/Zip Deploy.
3. If GitHub: authorize and pick repo/branch → configure build (GitHub Actions will be set up).
4. Browse: https://webapp-lab-1.azurewebsites.net

### Quick local ZIP deploy (Azure CLI)
```bash
# zip your app folder
zip -r app.zip .
# deploy to app service
az webapp deployment source config-zip -g rg-azure-labs -n webapp-lab-1 --src app.zip
```

---

## Lab 6 — Azure SQL Database

### Objective
Create a SQL database, configure firewall, and connect with Azure Data Studio.

### Steps (Portal)
1. Portal → **SQL databases** → + Create.
   - Subscription, Resource Group, Database name: `sqldb-lab`
   - Create a new logical server: `sqlsrv-lab` (choose admin login/password)
2. After deployment → Server overview → Set server firewall rules → Add client IP and "Allow Azure services and resources to access this server" if needed.
3. Tools: Download **Azure Data Studio** or use **Query editor (preview)** in portal.
4. Sample query to create a table:
```sql
CREATE TABLE dbo.test (id INT PRIMARY KEY, name NVARCHAR(50));
INSERT INTO dbo.test (id, name) VALUES (1, 'azure-lab');
SELECT * FROM dbo.test;
```

### CLI example
```bash
# create server and database via az (example)
az sql server create -g rg-azure-labs -n sqlsrv-lab -l centralindia -u sqladmin -p 'YourPassword123!'
az sql db create -g rg-azure-labs -s sqlsrv-lab -n sqldb-lab --service-objective S0
```

---

## Lab 7 — Load Balancer (Public LB) with 2 VMs

### Objective
Deploy two web VMs and put them behind a public Load Balancer.

### Steps (Portal)
1. Create two VMs (vm-lb-1, vm-lb-2) and install web server:
   - Linux: `sudo apt update && sudo apt install nginx -y`
   - Windows: `Install-WindowsFeature -name Web-Server -IncludeManagementTools`
   - Ensure each VM serves a simple index page showing the VM name or IP.
2. Create → **Load balancer** → + Create → Public load balancer.
   - Frontend IP configuration: create new public IP.
3. Backend pool: Add both VM NICs to backend pool.
4. Health probe: Protocol TCP, Port 80, Interval 5s, Unhealthy threshold 2.
5. Load balancing rule: Port 80 to backend pool, probe = above probe.
6. Test: Open LB public IP in browser; you should see the web page. Refresh to see requests sent to different VMs.
7. Stop one VM and confirm traffic continues to the other VM.

### CLI example (high-level)
```bash
# creating Azure LB via CLI is verbose; use Portal for labs. Use CLI for automation.
```

---

## Lab 8 — Azure Bastion (Secure VM access)

### Objective
Use Azure Bastion to connect to VMs securely without exposing RDP/SSH public ports.

### Steps (Portal)
1. Ensure your VNet has a dedicated subnet named `AzureBastionSubnet` with at least /27.
2. Portal → **Bastions** → + Create. Select VNet and create a Public IP.
3. After deploy, go to VM → Connect → Bastion → Enter credentials → Connect.
4. Bastion connects over TLS and does not require VM public IP.

---

## Lab 9 — Azure Monitor, Metrics, and Alerts

### Objective
Enable monitoring and create an alert rule for CPU usage.

### Steps (Portal)
1. VM → Monitoring → Insights → Enable (if not already).
2. Go to Monitor → Alerts → + Create → Alert rule:
   - Scope: Select your VM resource
   - Condition: CPU Percentage > 80% (Aggregation: Average, Period: 5 minutes)
   - Action: Create action group with Email/SMS (or use default)
   - Alert details: give name `high-cpu-alert`
3. Test: On Linux VM run CPU stress:
```bash
# install stress tool
sudo apt-get update && sudo apt-get install -y stress
# run stress for 60s on 2 cores
stress --cpu 2 --timeout 60
```
4. Verify alert fired in Monitor → Alerts (and you'll receive notification).

---

## Lab 10 — Azure Backup & Recovery (VM Backup)

### Objective
Enable VM backup and perform a restore to test recovery.

### Steps (Portal)
1. Create a **Recovery Services vault**: Portal → Recovery Services vaults → + Create.
2. Vault → Backup → Select **Azure** → Workload type: **Azure Virtual Machine** → Configure backup.
3. Choose or create a backup policy (daily/weekly) and enable backup for VM.
4. Run **Backup now** to take an on-demand backup.
5. To restore: Vault → Backup items → Virtual Machine → Select restore point → Restore (create new VM or restore disks).
6. Test file-level restore: use the restore points and follow instructions to download the backup agent if necessary.

---

## Appendix: Helpful CLI snippets & tips

- View resource groups:
```bash
az group list -o table
```
- Delete resource group (cleanup):
```bash
az group delete -n rg-azure-labs --yes --no-wait
```
- Show VM public IP:
```bash
az vm list-ip-addresses -g rg-azure-labs -n vm-lab-1 -o table
```

---

## Troubleshooting & Tips
- If a resource name must be globally unique (storage, app service), append random digits: `mystorage12345`.
- If you get permission errors, check subscription role or use a different subscription with contributor access.
- Use **Azure Cloud Shell** (bash or PowerShell) inside the portal for CLI commands — no local setup required.
- To save costs, delete resource groups when you finish labs.

---

## License
MIT License — feel free to reuse and adapt these instructions for training and study.
